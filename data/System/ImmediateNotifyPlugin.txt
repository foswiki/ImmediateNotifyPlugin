%META:TOPICINFO{author="ProjectContributor" date="1282945994" format="1.1" version="3"}%
---+ Immediate Notify Plugin

%RED%Please also read Foswiki:Extensions.MailerContrib%ENDCOLOR%.

The Foswiki system uses a built-in topic change notification system - MailerContrib, that sends notifications via e-mail on an interval set in the system =crontab=.  MailerContrib can notify as often as needed by adjusting the settings in =crontab=.

Unlike MailerContrib, this extension will perform an __immediate__ notification during the save process.  Reasons to use this extension for notifications include:
   * Inability to use the system =crontab= to schedule the notification run.
   * Need for immediate notification
   * Need for notification using Jabber or other non-standard channels.

%X% Note that this extension is less efficient than the MailerContrib, and adds a small delay during save while the notifications are sent.

The notifications are triggerd from two sources:
   * Web based notifications are set in the WebImmediateNotify topic. Users listed in that topic will be notified of any changes to the web.
   * Topic based notifications are set in the individual topics that will be tracked for notification.

---++ Syntax Rules
---+++ Web based notifications

Register for notification in the Web<nop>ImmediateNotify topic by adding their username as an entry in a bullet list.
<verbatim>
   * Joeuser
   * MyTeamGroup
</verbatim>

---+++ Topic based notifications

Add a set statement to the topic. WikiNames (or groups) are listed in a comma separated list. The user web prefix is supported but not required.
<verbatim>
   * Set IMMEDIATENOTIFY = JoeUser, MyTeamGroup
</verbatim>

---+++ User configuration

The user may optionally configure their desired notification method.  Since SMTP and Jabber are currently the only available methods, this consists of:

   * Adding a line =" * Set IMMEDIATENOTIFYMETHOD = Jabber"= (or "SMTP", respectively) to their topic.
   * Adding a line ="Jabber: jabber_user@jabber_server.org"= to their topic for notification per Jabber (no configuration is needed for SMTP).

If no notification method is selected, the user will be notified using SMTP.

---++ <nop>%TOPIC% Global Settings

%X% In this version of %TOPIC%, configuration settings are __not read from this topic__.   System settings are configured in the %USERSWEB%.SitePreferences topic

   * Notification method configuration:
      * Set IMMEDIATENOTIFYPLUGIN_METHODS = SMTP

   * Jabber method configuration:
      * Set IMMEDIATENOTIFYPLUGIN_JABBER_USERNAME =
      * Set IMMEDIATENOTIFYPLUGIN_JABBER_PASSWORD =
      * Set IMMEDIATENOTIFYPLUGIN_JABBER_SERVER =

   * Debug plugin: (See output in =data/debug.txt=)
      * Set IMMEDIATENOTIFYPLUGIN_DEBUG = 0

---++ Plugin Installation Instructions

__Note:__ You do not need to install anything on the browser to use this plugin. The following instructions are for the administrator who installs the plugin on the server where Foswiki is running.

   * Download the ZIP/TGZ file from the Plugin web (see below)
   * Unzip =%TOPIC%.zip= in your Foswiki installation directory. Content:
| *File:* | *Description:* |
%$MANIFEST%
   * Set up notification methods (default is SMTP)
      * Currently the only available methods are via SMTP and Jabber.
         * SMTP
            * The site's configuration is used - no additional configuration is needed.
         * Jabber
            * Set up a Jabber account for the wiki with a standard client.
            * Set JABBER_USERNAME, JABBER_PASSWORD, and JABBER_SERVER in the plugin topic.
   * Visit =configure= in your Foswiki installation, and enable the plugin in the {Plugins} section.
   * Create a =Web<nop>ImmediateNotify= topic in each web for users to list their names in for notification.

---++ Plugin Info

|  Plugin Author: | TWiki:Main/WalterMundt, TWiki:Main/JuergenPabel, Foswiki:Main/GeorgeClark |
|  Plugin Version: | %$VERSION% |
|  Plugin Release: | %$RELEASE% |
|  Change History: | <!-- specify latest version first --> |
|  26 Aug 2010 | Test release - Foswikitask:Item9551 |
|  05 Jan 2010 | Ported to Foswiki (Foswiki:Main.WillNoris) |
|  21 May 2007 | Bugs:Item3969 - 8bit email fix (Foswiki:Main.WillNorris) |
|  26 Jul 2006: | (v0.3) - Foswiki:Main.SteffenPoulsen: Ported to TWiki-4 / Dakar |
|  16 Mar 2003: | Added support for groups and SMTP |
|  03 Feb 2003: | Initial version |
|  Dependencies: | %$DEPENDENCIES% |
|  Other Dependencies: | none |
|  Perl Version: | &gt; 5.6.1 |
|  Plugin Home: | http://foswiki.org/Extensions/%TOPIC% |
|  Support: | http://foswiki.org/Support/%TOPIC% |
__Related Topics:__ %SYSTEMWEB%.DefaultPreferences, %USERSWEB%.SitePreferences, [[%SYSTEMWEB%.Plugins][Plugins]], DefaultPlugin

-- TWiki:Main/WalterMundt - 04 Feb 2003, TWiki:Main/JuergenPabel - 16 Mar 2003,  Foswiki:Main/GeorgeClark - 27 Aug 2010
